<!DOCTYPE html>
<html>
<head>
    <title>Acousis</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Sidebar -->
    <div id="sidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">&times;</a>
        <a href="#">Users</a>
        <a href="{{ url_for('recommend') }}">Music Recommendations</a>
        <a href="#">Account</a>
        <a href="#">Settings</a>
        <a href="{{ url_for('logout') }}">Logout</a>
    </div>

    <!-- Header with logo + menu button -->
    <header>
        <span class="menu-btn" onclick="openSidebar()">&#9776;</span>
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Acousis Logo" class="logo">
        <h1>Acousis</h1>
        <!-- Search Form -->
        <form method="POST" class="search-form">
            <input type="text" name="artist_name" placeholder="Enter artist name" required>
            <button type="submit">Search</button>
        </form>
    </header>

    <!-- Artist Search Results -->
    {% if artist %}
    <div class="card">
        <h2>{{ artist.name }}</h2>
        <p><strong>Followers:</strong> {{ "{:,}".format(artist.followers.total) }}</p>
        <p><strong>Popularity:</strong> {{ artist.popularity }}/100</p>
        <p><a href="{{ artist.external_urls.spotify }}" target="_blank">Spotify Profile</a></p>

        <h3>Genres</h3>
        {% if artist.genres %}
        <ul>
            {% for genre in artist.genres %}
            <li>{{ genre }}</li>
            {% endfor %}
        </ul>
        {% else %}
        <p>No genres available</p>
        {% endif %}

        <h3>Top Songs</h3>
        {% if songs %}
        <ol>
            {% for song in songs %}
            <li>
                <a href="{{ song.external_urls.spotify }}" target="_blank">{{ song.name }}</a>
            </li>
            {% endfor %}
        </ol>
        {% else %}
        <p>No top songs available</p>
        {% endif %}
    </div>
    {% endif %}

    <!-- Trending Artists Section -->
    {% if trending %}
    <div class="card">
        <h2>üåç Trending Artists (International)</h2>
        <ul class="artist-list">
            {% for t in trending %}
            <li>
                {% if t.images and t.images[0] %}
                    <img src="{{ t.images[0].url }}" alt="{{ t.name }}" class="artist-thumb">
                {% endif %}
                <strong>{{ t.name }}</strong>
                <small>({{ "{:,}".format(t.followers.total) }} followers)</small><br>
                <a href="{{ t.external_urls.spotify }}" target="_blank">Spotify Profile</a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <!-- Optional: Quick Recommendations Section -->
    {% if recommendations %}
    <div class="card">
        <h2>üéµ Recommended Artists for You</h2>
        <ul class="artist-list">
            {% for rec in recommendations %}
            <li>
                {% if rec.images and rec.images[0] %}
                    <img src="{{ rec.images[0].url }}" alt="{{ rec.name }}" class="artist-thumb">
                {% endif %}
                <strong>{{ rec.name }}</strong>
                <small>({{ "{:,}".format(rec.followers.total) }} followers)</small><br>
                <a href="{{ rec.external_urls.spotify }}" target="_blank">Spotify Profile</a>
            </li>
            {% endfor %}
        </ul>
        <a href="{{ url_for('recommend') }}" class="btn">See More Recommendations</a>
    </div>
    {% endif %}

    <script>
        function openSidebar() {
            document.getElementById("sidebar").style.width = "250px";
        }
        function closeSidebar() {
            document.getElementById("sidebar").style.width = "0";
        }
    </script>
</body>
</html>
